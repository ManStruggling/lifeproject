"use strict";var _createClass=function(){function n(t,s){for(var e=0;e<s.length;e++){var n=s[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,s,e){return s&&n(t.prototype,s),e&&n(t,e),t}}();function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}require(["../scripts/config.js"],function(){require(["jquery","cookie","benlailife"],function(e,t){var s=function(){function s(t){_classCallCheck(this,s),this.str="",this.goods_list_str="",this.json=[],this.count=0,this.all_money=0,this.no=t}return _createClass(s,[{key:"get_str",value:function(){return this.str=t.getCookie("goods"),this}},{key:"get_json",value:function(){return 3<this.str.length?this.json=JSON.parse(this.str):(this.no_goods='<h5 style="padding:50px 0;text-align:center;font: 400 14px/60px \'Microsoft YaHei\';">\n                    您还没有购买过商品，<a href="benlailife.html" style="color: #abd13e;cursor:pointer;">去逛逛吧</a>\n                    </h5>',e(".shopCar_show_goods ul").append(this.no_goods)),this}},{key:"storage",value:function(){return t.setCookie("goods",JSON.stringify(this.json),365),this}},{key:"change",value:function(){if(this.str){e(".shopCar_show_goods ul").empty();for(var t=0;t<this.json.length;t++)this.goods_list_str+='<li class="clear">\n                        <div class="check"> <input type="checkbox" name="cbxSelectProduct" class="cbxSelectProduct278847"\n                                data-type="SelectProduct" checked="checked"> </div>\n                        <div class="pic"> <a> <img src="'+this.json[t].src+'">\n                            </a> </div>\n                        <div class="name"> <a href="#">'+this.json[t].tit+'</a>\n                            <div class="icon"> </div>\n                        </div>\n                        <div class="price">'+this.json[t].price+'</div>\n                        <div class="c_quantity">\n                            <p class="reduce" sysno="'+this.json[t].sysno+'"> <a>\n                                    <img src="//image.benlailife.com/webStatic/images/goods/dey_03_0c4d2417.gif" width="15"\n                                        height="15"> </a> </p>\n                            <p class="mt0"> <input type="text" readonly="readonly" class="textgt_n" data-type="input" data-producttype="0"\n                                    data-productid="278847" data-productvalue="2" value="'+this.json[t].count+'" maxlength="3"> </p>\n                            <p class="increase" sysno="'+this.json[t].sysno+'"> <a> <img src="//image.benlailife.com/webStatic/images/goods/dey_04_0e745786.gif" width="15"\n                                        height="15"> </a> </p>\n                        </div>\n                        <div class="subtotal">￥'+(Number(this.json[t].price.slice(1))*this.json[t].count).toFixed(2)+'</div>\n                        <div class="operating"> <a>收藏</a> <br> <a class="delete_goods" sysno="'+this.json[t].sysno+'">删除</a> </div>\n                        </li>',this.count+=this.json[t].count;e(".shopCar_show_goods ul").append(this.goods_list_str),e("#goTop .rigth_to_shopCar").html(this.count),this.calculation()}}},{key:"reduce_num",value:function(){for(var t=0;t<this.json.length;t++)this.no==this.json[t].sysno&&(this.json[t].count<=1?this.json[t].count=1:this.json[t].count-=1);return this}},{key:"increase_num",value:function(){for(var t=0;t<this.json.length;t++)this.no==this.json[t].sysno&&(this.json[t].count+=1);return this}},{key:"delete_goods",value:function(){for(var t=0;t<this.json.length;t++)if(this.no==this.json[t].sysno)return this.json.splice(t,1),this}},{key:"calculation",value:function(){for(var t=0;t<this.json.length;t++)e(".cbxSelectProduct278847").eq(t).is(":checked")&&(this.all_money+=Number(this.json[t].price.slice(1))*this.json[t].count);e(".Settlement span").html("￥"+this.all_money.toFixed(2))}}]),s}(),n=new s;3<n.get_str().str.length?n.get_str().get_json().change():n.get_str().get_json(),e(".shopCar_show_goods ul").on("click",".reduce",function(){var t=e(this).attr("sysno");new s(t).get_str().get_json().reduce_num().storage().get_str().get_json().change()}),e(".shopCar_show_goods ul").on("click",".increase",function(){var t=e(this).attr("sysno");new s(t).get_str().get_json().increase_num().storage().get_str().get_json().change()}),e(".shopCar_show_goods ul").on("click",".delete_goods",function(){var t=e(this).attr("sysno");new s(t).get_str().get_json().delete_goods().storage().get_str().get_json().change(),(new s).get_str().str.length<3&&(new s).get_str().get_json()}),e("input[name=GroupSelectAll]").click(function(){e(this).is(":checked")?e(".cbxSelectProduct278847").prop("checked",!0):e(".cbxSelectProduct278847").prop("checked",!1),(new s).get_str().get_json().calculation()}),e(".shopCar_show_goods ul").on("click",".cbxSelectProduct278847",function(){(new s).get_str().get_json().calculation()})})});