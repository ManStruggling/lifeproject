"use strict";var _createClass=function(){function e(t,s){for(var n=0;n<s.length;n++){var e=s[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}();function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}require(["../scripts/config.js"],function(){require(["jquery","cookie","benlailife"],function(n,t){var s=function(){function s(t){_classCallCheck(this,s),this.str="",this.goods_list_str="",this.json=[],this.count=0,this.all_money=0,this.no=t}return _createClass(s,[{key:"get_str",value:function(){return this.str=t.getCookie("goods"),this}},{key:"get_json",value:function(){if(this.str)return this.json=JSON.parse(this.str),this}},{key:"storage",value:function(){return t.setCookie("goods",JSON.stringify(this.json),365),this}},{key:"change",value:function(){if(this.str){n(".shopCar_show_goods ul").empty();for(var t=0;t<this.json.length;t++)this.goods_list_str+='<li class="clear">\n                        <div class="check"> <input type="checkbox" name="cbxSelectProduct" id="cbxSelectProduct278847"\n                                data-type="SelectProduct" checked="checked"> </div>\n                        <div class="pic"> <a> <img src="'+this.json[t].src+'">\n                            </a> </div>\n                        <div class="name"> <a href="#">'+this.json[t].tit+'</a>\n                            <div class="icon"> </div>\n                        </div>\n                        <div class="price">'+this.json[t].price+'</div>\n                        <div class="c_quantity">\n                            <p class="reduce" sysno="'+this.json[t].sysno+'"> <a>\n                                    <img src="//image.benlailife.com/webStatic/images/goods/dey_03_0c4d2417.gif" width="15"\n                                        height="15"> </a> </p>\n                            <p class="mt0"> <input type="text" class="textgt_n" data-type="input" data-producttype="0"\n                                    data-productid="278847" data-productvalue="2" value="'+this.json[t].count+'" maxlength="3"> </p>\n                            <p class="increase" sysno="'+this.json[t].sysno+'"> <a> <img src="//image.benlailife.com/webStatic/images/goods/dey_04_0e745786.gif" width="15"\n                                        height="15"> </a> </p>\n                        </div>\n                        <div class="subtotal">￥'+Number(this.json[t].price.slice(1))*this.json[t].count+'</div>\n                        <div class="operating"> <a>收藏</a> <br> <a>删除</a> </div>\n                        </li>',this.all_money+=Number(this.json[t].price.slice(1))*this.json[t].count,this.count+=this.json[t].count;n(".shopCar_show_goods ul").append(this.goods_list_str),n(".Settlement span").html("￥"+this.all_money.toFixed(2)),n("#goTop .rigth_to_shopCar").html(this.count)}}},{key:"reduce_num",value:function(){for(var t=0;t<this.json.length;t++)this.no==this.json[t].sysno&&(this.json[t].count<=1?this.json[t].count=1:this.json[t].count-=1);return this}},{key:"increase_num",value:function(){for(var t=0;t<this.json.length;t++)this.no==this.json[t].sysno&&(this.json[t].count+=1);return this}}]),s}(),e=new s;e.get_str().str&&e.get_str().get_json().change(),n(".shopCar_show_goods ul").on("click",".reduce",function(){var t=n(this).attr("sysno");new s(t).get_str().get_json().reduce_num().storage().get_str().get_json().change()}),n(".shopCar_show_goods ul").on("click",".increase",function(){var t=n(this).attr("sysno");new s(t).get_str().get_json().increase_num().storage().get_str().get_json().change()})})});